(window["webpackJsonpinfo-sys"]=window["webpackJsonpinfo-sys"]||[]).push([[0],{104:function(e,t,a){e.exports=a(181)},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},181:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=(a(109),a(110),a(9)),s=a(184),m=a(183),i=a(11),u=a(52);function f(e){return/^([\u3400-\u4DFFh]|[\u4E00-\u9fa5]){1,15}[\xb7.]?([\u3400-\u4DFFh]|[\u4E00-\u9fa5]){1,15}$/g.test(e)}function d(e){return/^[19]\d{10}$/.test(e)}function g(e){return/^\d{6}$/.test(e)}function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||18!==e.length||!/^[0-9]*$/.test(e.substring(0,17))||!/^[0-9Xx]{1}$/.test(e.substring(17))||!/^(?:19\d{2}|20[01]\d)(?:1[0-2]|0?[1-9])(?:3[01]|[12][0-9]|0?[1-9])$/.test(e.substring(6,14)))return!1;if(!t)return!0;for(var a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,r=0;r<17;r+=1)n+=parseInt(e.substring(r,r+1))*a[r];var c=n%11,o=e.substring(17);return 2===c?"X"===o||"x"===o:parseInt(o)===[1,0,10,9,8,7,6,5,4,3,2][c]}function _(e){return/^[A-Za-z0-9]{8}$/.test(e)}var h=a(92);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var E="https://growthmind.xyz/api",N={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}};function y(e){return fetch("".concat(E,"/getUserInfoList"),v({},N,{body:JSON.stringify(v({},e))}))}a(111);var I=a(15),O=60;var S=Object(I.f)(function(e){var t=e.history,a=Object(n.useState)(localStorage.getItem("telephone")||""),c=Object(l.a)(a,2),o=c[0],f=c[1],p=Object(n.useState)(""),_=Object(l.a)(p,2),h=_[0],b=_[1],y=Object(n.useState)(O),I=Object(l.a)(y,2),S=I[0],j=I[1],C=Object(n.useRef)(S);return C.current=S,r.a.createElement("div",{className:"login"},r.a.createElement("header",{className:"login__header"},"\u767b\u5f55"),r.a.createElement("div",{className:"login__input"},r.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",size:"large",value:o,onChange:function(e){var t=e.target.value;f(t)},suffix:o?d(o)?r.a.createElement(i.a,{type:"check-circle",style:{color:"rgba(0, 255, 0, .45)"}}):r.a.createElement(i.a,{type:"exclamation-circle",style:{color:"rgba(255, 0, 0, .45)"}}):r.a.createElement("span",null)})),r.a.createElement("div",{className:"login__input login__vertify-code"},r.a.createElement(m.a,{className:"login__vertify-code-input",value:h,size:"large",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChange:function(e){var t=e.target.value;b("".concat(t))},suffix:h?g(h)?r.a.createElement(i.a,{type:"check-circle",style:{color:"rgba(0, 255, 0, .45)"}}):r.a.createElement(i.a,{type:"exclamation-circle",style:{color:"rgba(255, 0, 0, .45)"}}):r.a.createElement("span",null)}),S===O?r.a.createElement(u.a,{type:"primary",size:"large",onClick:function(){if(!d(o))return s.a.error("\u624b\u673a\u53f7\u586b\u5199\u9519\u8bef");var e,t=setInterval(function(){j(C.current-1),C.current<0&&(clearInterval(t),j(O))},1e3);(e={phoneNumber:o},fetch("".concat(E,"/getMessageCode"),v({},N,{body:JSON.stringify(v({},e))}))).then(function(){s.a.success("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001")}).catch(function(e){console.error(e),s.a.error("\u670d\u52a1\u5668\u5f02\u5e38")})}},"\u53d1\u9001\u9a8c\u8bc1\u7801"):r.a.createElement(u.a,{type:"primary",size:"large",disabled:!0},S,"\u79d2\u540e\u91cd\u8bd5")),r.a.createElement(u.a,{className:"login__submit",size:"large",type:"primary",onClick:function(){return g(h)?d(o)?void(e={phoneNumber:o,code:h},fetch("".concat(E,"/checkMessageCode"),v({},N,{body:JSON.stringify(v({},e))}))).then(function(e){return e.json()}).then(function(e){return e&&e.code?s.a.error(e.msg):(localStorage.getItem("telephone")&&localStorage.removeItem("telephone"),localStorage.setItem("telephone",o),t.push("/userForm"))}):s.a.error("\u624b\u673a\u53f7\u586b\u5199\u9519\u8bef"):s.a.error("\u9a8c\u8bc1\u7801\u683c\u5f0f\u9519\u8bef");var e}},"\u767b\u5f55"))}),j=a(98),C=a.n(j);a(171);var w=Object(I.f)(function(e){var t=C.a.parse(e.location.search).adminId,a="string"===typeof t?t:"",c=Object(n.useState)(localStorage.getItem("adminId")||a),o=Object(l.a)(c,1)[0];o&&(localStorage.getItem("adminId")&&localStorage.removeItem("adminId"),localStorage.setItem("adminId",o));var g=localStorage.getItem("telephone")||"";g&&d(g)||e.history.push("/login");var h=Object(n.useState)(g),b=Object(l.a)(h,2),y=b[0],I=b[1],O=Object(n.useState)(localStorage.getItem("name")||""),S=Object(l.a)(O,2),j=S[0],w=S[1],k=Object(n.useState)(localStorage.getItem("id")||""),x=Object(l.a)(k,2),z=x[0],P=x[1],D=Object(n.useState)(localStorage.getItem("studentNo")||""),A=Object(l.a)(D,2),F=A[0],J=A[1],$=Object(n.useState)(localStorage.getItem("".concat(j,"_").concat(z,"_").concat(F,"_").concat(y,"_has_submited"))||""),T=Object(l.a)($,2),M=T[0],U=T[1],B=Object(n.useState)(0),R=Object(l.a)(B,2),W=R[0],X=R[1];function K(e){w(e),e&&f(e)&&(localStorage.getItem("name")&&localStorage.removeItem("name"),localStorage.setItem("name",e))}function L(e){P(e),e&&p(e)&&(localStorage.getItem("id")&&localStorage.removeItem("id"),localStorage.setItem("id",e))}function Z(e){J(e),e&&_(e)&&(localStorage.getItem("studentNo")&&localStorage.removeItem("studentNo"),localStorage.setItem("studentNo",e))}Object(n.useEffect)(function(){var e;d(y)&&(e={phoneNumber:y},fetch("".concat(E,"/getUserInfoByPhoneNo"),v({},N,{body:JSON.stringify(v({},e))}))).then(function(e){return e.json()}).then(function(e){var t=e||{},a=t.name,n=void 0===a?"":a,r=t.studentNumber,c=void 0===r?"":r,o=t.credentialNo,l=void 0===o?"":o,s=t.isConfirmed,m=void 0===s?0:s;K(n),Z(c),L(l),X(m),1===m&&U("1")})},[y]);var q=r.a.createElement("div",{className:"user-form"},r.a.createElement("header",{className:"user-form__header"},"\u586b\u5199\u4fe1\u606f"),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name"},"\u59d3\u540d"),":",r.a.createElement(m.a,{className:"user-form__input-content",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",size:"large",value:j,onChange:function(e){K(e.target.value)},suffix:j?f(j)?r.a.createElement(i.a,{type:"check-circle",style:{color:"rgba(0, 255, 0, .45)"}}):r.a.createElement(i.a,{type:"exclamation-circle",style:{color:"rgba(255, 0, 0, .45)"}}):r.a.createElement("span",null)})),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name"},"\u8eab\u4efd\u8bc1"),":",r.a.createElement(m.a,{className:"user-form__input-content",placeholder:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1",size:"large",value:z,onChange:function(e){L(e.target.value)},suffix:z?p(z)?r.a.createElement(i.a,{type:"check-circle",style:{color:"rgba(0, 255, 0, .45)"}}):r.a.createElement(i.a,{type:"exclamation-circle",style:{color:"rgba(255, 0, 0, .45)"}}):r.a.createElement("span",null)})),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name"},"\u5b66\u53f7"),":",r.a.createElement(m.a,{className:"user-form__input-content",placeholder:"\u8bf7\u8f93\u5165\u5b66\u53f7",size:"large",value:F,onChange:function(e){Z(e.target.value)},suffix:F?_(F)?r.a.createElement(i.a,{type:"check-circle",style:{color:"rgba(0, 255, 0, .45)"}}):r.a.createElement(i.a,{type:"exclamation-circle",style:{color:"rgba(255, 0, 0, .45)"}}):r.a.createElement("span",null)})),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name"},"\u624b\u673a\u53f7"),":",d(y)?r.a.createElement("div",{className:"user-form__input-content"},y):r.a.createElement(m.a,{className:"user-form__input-content",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",size:"large",value:y,onChange:function(e){!function(e){I(e),e&&d(e)&&(localStorage.getItem("telephone")&&localStorage.removeItem("telephone"),localStorage.setItem("telephone",e))}(e.target.value)},suffix:y?d(y)?r.a.createElement(i.a,{type:"check-circle",style:{color:"rgba(0, 255, 0, .45)"}}):r.a.createElement(i.a,{type:"exclamation-circle",style:{color:"rgba(255, 0, 0, .45)"}}):r.a.createElement("span",null)})),r.a.createElement(u.a,{className:"user-form__submit",size:"large",type:"primary",onClick:function(){new Promise(function(e,t){return d(y)&&f(j)&&p(z)&&_(F)?M&&M==="".concat(j,"_").concat(z,"_").concat(F,"_").concat(y,"_has_submited")||localStorage.getItem("".concat(j,"_").concat(z,"_").concat(F,"_").concat(y,"_has_submited"))?(U("1"),t("\u4f60\u5df2\u5b8c\u6210\u4fe1\u606f\u63d0\u4ea4")):e("\u8f93\u5165\u6821\u9a8c\u5b8c\u6210"):t("\u4fe1\u606f\u586b\u5199\u9519\u8bef")}).then(function(){var e;(e={studentNumber:F,phoneNumber:y,name:j,credentialNo:z,administratorId:o},fetch("".concat(E,"/saveUserInfo"),v({},N,{body:JSON.stringify(v({},e))}))).then(function(){U("1"),localStorage.setItem("".concat(j,"_").concat(z,"_").concat(F,"_").concat(y,"_has_submited"),"1"),s.a.success("\u4fe1\u606f\u63d0\u4ea4\u6210\u529f")}).catch(function(e){console.error(e),s.a.error("\u670d\u52a1\u5668\u5f02\u5e38")})}).catch(function(e){s.a.warning(e)})}},"\u63d0\u4ea4")),G=r.a.createElement("div",{className:"user-form"},r.a.createElement("header",{className:"user-form__header"},"\u4e2a\u4eba\u4fe1\u606f"),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name user-form__info"},"\u59d3\u540d"),":",r.a.createElement("div",{className:"user-form__input-content"},j)),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name user-form__info"},"\u8eab\u4efd\u8bc1"),":",r.a.createElement("div",{className:"user-form__input-content"},z)),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name user-form__info"},"\u5b66\u53f7"),":",r.a.createElement("div",{className:"user-form__input-content"},F)),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name user-form__info"},"\u624b\u673a\u53f7"),":",r.a.createElement("div",{className:"user-form__input-content"},y)),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name user-form__info"},"\u7f34\u8d39\u72b6\u6001"),":",r.a.createElement("div",{className:"user-form__input-content"},0===W?"\u672a\u786e\u8ba4":"\u5df2\u786e\u8ba4")),r.a.createElement("div",{className:"user-form__input userForm_toptip"}," \u4e2a\u4eba\u4fe1\u606f\u5df2\u63d0\u4ea4\uff0c\u8bf7\u627e\u5de5\u4f5c\u4eba\u5458\u7f34\u8d39\u3002\u82e5\u4fe1\u606f\u6709\u8bef\uff0c\u8bf7\u627e\u5de5\u4f5c\u4eba\u5458\u5907\u6ce8 "));return M?G:q}),k=a(182),x=(a(172),1);var z=Object(I.f)(function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=parseInt(localStorage.getItem("hasAuthed")||"0"),i=Math.floor((Date.now()-o)/1e3)<3600*x,f=Object(n.useState)(i||!1),d=Object(l.a)(f,2),g=d[0],p=d[1],_=Object(n.useState)([]),h=Object(l.a)(_,2),b=h[0],I=h[1],O=Object(n.useState)([]),S=Object(l.a)(O,2),j=S[0],C=S[1],w=Object(n.useState)("unConfirmed"),z=Object(l.a)(w,2),P=z[0],D=z[1],A=Object(n.useState)(localStorage.getItem("administratorId")||""),F=Object(l.a)(A,2),J=F[0],$=F[1],T=Object(n.useState)(0),M=Object(l.a)(T,2),U=M[0],B=M[1];function R(e){var t;(t={phoneNumber:e.phoneNumber},fetch("".concat(E,"/confirmPay"),v({},N,{body:JSON.stringify(v({},t))}))).then(function(){B(U+1),s.a.success("\u5df2\u786e\u8ba4")}).catch(function(e){s.a.error(e)})}Object(n.useEffect)(function(){y({opType:"UNCONFIRMED",administratorId:J}).then(function(e){return e.json()}).then(function(e){I(e||[])}),y({opType:"CONFIRMED",administratorId:J}).then(function(e){return e.json()}).then(function(e){C(e||[])})},[U,J]);var W=r.a.createElement("div",{className:"user-form"},r.a.createElement("header",{className:"login__header"},"\u7ba1\u7406\u5458\u767b\u5f55"),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name"},"ID"),":",r.a.createElement(m.a,{className:"user-form__input-content",placeholder:"\u8bf7\u8f93\u5165\u7ba1\u7406\u5458ID",size:"large",value:J,onChange:function(e){var t=e.target.value;$(t)}})),r.a.createElement("div",{className:"user-form__input"},r.a.createElement("label",{className:"user-form__input-name"},"\u5bc6\u7801"),":",r.a.createElement(m.a.Password,{className:"user-form__input-content",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",size:"large",value:a,onChange:function(e){var t=e.target.value;c(t)}})),r.a.createElement(u.a,{className:"user-form__submit admin_submit",size:"large",type:"primary",onClick:function(){"nidemingzi"===a?(p(!0),localStorage.getItem("hasAuthed")&&localStorage.removeItem("hasAuthed"),localStorage.setItem("hasAuthed","".concat(Date.now())),localStorage.getItem("administratorId")&&localStorage.removeItem("administratorId"),localStorage.setItem("administratorId",J),B(U+1)):s.a.error("\u5bc6\u7801\u8f93\u5165\u9519\u8bef")}},"\u767b\u5f55")),X=r.a.createElement("div",{className:"admin"},r.a.createElement("header",{className:"admin__header"},r.a.createElement("span",null,"\u4fe1\u606f"),r.a.createElement(u.a,{className:"admin__logout",type:"primary",onClick:function(){p(!1),$(""),localStorage.getItem("hasAuthed")&&localStorage.removeItem("hasAuthed"),localStorage.getItem("administratorId")&&localStorage.removeItem("administratorId")}},"\u9000\u51fa\u767b\u5f55")),r.a.createElement(k.a,{defaultActiveKey:"1",onChange:function(e){D(e)}},r.a.createElement(k.a.TabPane,{tab:"\u672a\u786e\u8ba4 ( ".concat(b.length," )"),key:"unConfirmed"}),r.a.createElement(k.a.TabPane,{tab:"\u5df2\u786e\u8ba4 ( ".concat(j.length," )"),key:"confirmed"})),("confirmed"===P?j:b).map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("div",{className:"admin__item"},r.a.createElement("div",{className:"admin__item-user-info"},r.a.createElement("div",{className:"admin__item-user-info-item"},"\u59d3\u540d\uff1a",e.name),r.a.createElement("div",{className:"admin__item-user-info-item"},"\u5b66\u53f7\uff1a",e.studentNumber),r.a.createElement("div",{className:"admin__item-user-info-item"},"\u624b\u673a\u53f7\uff1a",e.phoneNumber),r.a.createElement("div",{className:"admin__item-user-info-item"},"\u8eab\u4efd\u8bc1\uff1a",e.credentialNo),r.a.createElement("div",{className:"admin__item-user-info-item"},"\u65f6\u95f4\uff1a",e.sysCtime)),0===e.isConfirmed?r.a.createElement(u.a,{className:"admin__item-confirm-buttom",type:"primary",onClick:function(){R(e)}}," \u786e\u8ba4\u5df2\u4ed8\u6b3e "):r.a.createElement("div",{className:"admin__item-confirm-buttom"},"\u5df2\u786e\u8ba4")))}));return g?X:W}),P=a(101),D=[{path:"/login",component:S},{path:"/userForm",component:w},{path:"/admin",component:z}];var A=function(){return r.a.createElement(P.a,null,r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(I.c,null,D.map(function(e,t){return r.a.createElement(I.a,{path:e.path,key:t,component:e.component})}))))},F=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(A,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[104,1,2]]]);
//# sourceMappingURL=main.a9a8f43b.chunk.js.map